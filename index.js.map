{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\nconst myApiKey = \"53375208-e57c58d3edc6a90b7b7ee591a\";\n\n\n// let page = 1;\n\nexport async function getImagesByQuery(query, page) {\nconst params = new URLSearchParams({\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: 15,\n});\n\n\n\n    const response = await axios.get(`https://pixabay.com/api/?key=${myApiKey}&${params}`);\n    return response.data;\n};","import SimpleLightbox from \"simplelightbox\";\n\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\n\n\nconst refs = {\n    galleryList: document.querySelector(\".gallery\"),\n    loader: document.querySelector('.loader'),\n    moreBtn: document.querySelector('.more-btn'),\n}\n\nexport const createGallery = images => {\n    const imageTemplate = images.map(createImagesTemplate).join('');\n  // refs.galleryList.innerHTML = imageTemplate;\n  refs.galleryList.insertAdjacentHTML('beforeend', imageTemplate)\n    lightbox.refresh();\n} \n\n\n\n\nexport const createImagesTemplate = image => {\n    return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n    <ul class=\"info-list\">\n    <li class=\"info-link\"><p class=\"info-text\">Likes</p>${image.likes}</li>\n    <li class=\"info-link\"><p class=\"info-text\">Views</p>${image.views}</li>\n    <li class=\"info-link\"><p class=\"info-text\">Comments</p>${image.comments}</li>\n    <li class=\"info-link\"><p class=\"info-text\">Downloads</p>${image.downloads}</li>\n    </ul>\n  </a>\n</li>`;\n};\n\n\n\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionsDelay: 250,\n        });\n\n\nexport const clearGallery = () => {\n refs.galleryList.innerHTML = '';\n};\n\nexport const showLoader = () => {\n    refs.loader.classList.add('isOpen');\n}\n\nexport const hideLoader = () => {\n    refs.loader.classList.remove('isOpen');\n}\n\nexport const showLoadMoreButton = () => {\n  refs.moreBtn.classList.remove('isHidden');\n}\n\nexport const hideLoadMoreButton = () => {\n  refs.moreBtn.classList.add('isHidden');\n}","export default \"data:image/svg+xml,%3c!--%20Generated%20by%20IcoMoon.io%20--%3e%3csvg%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%3e%3cpath%20fill='%23fafafb'%20d='M9.080%200.292c0.187-0.187%200.441-0.292%200.706-0.292h12.428c0.265%200%200.519%200.105%200.706%200.292l8.788%208.788c0.187%200.187%200.292%200.441%200.292%200.706v12.428c0%200.265-0.105%200.519-0.292%200.706l-8.788%208.788c-0.187%200.187-0.441%200.292-0.706%200.292h-12.428c-0.265%200-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265%200.105-0.519%200.292-0.706l8.788-8.788zM10.2%202l-8.2%208.2v11.6l8.2%208.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z'%3e%3c/path%3e%3cpath%20fill='%23fafafb'%20d='M9.292%209.292c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.132%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217l5.292%205.294%205.292-5.294c0.093-0.093%200.203-0.167%200.325-0.217s0.252-0.076%200.383-0.076c0.131%200%200.262%200.026%200.383%200.076s0.232%200.124%200.325%200.217c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325l-5.294%205.292%205.294%205.292c0.093%200.093%200.167%200.203%200.217%200.325s0.076%200.252%200.076%200.383-0.026%200.262-0.076%200.383c-0.050%200.121-0.124%200.232-0.217%200.325s-0.203%200.167-0.325%200.217c-0.121%200.050-0.252%200.076-0.383%200.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292%205.294c-0.093%200.093-0.203%200.167-0.325%200.217s-0.252%200.076-0.383%200.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262%200.076-0.383c0.050-0.121%200.124-0.232%200.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132%200.026-0.262%200.076-0.383s0.124-0.232%200.217-0.325z'%3e%3c/path%3e%3c/svg%3e\"","import { getImagesByQuery } from \"./js/pixabay-api\"\n\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\"\n\nimport errorSvg from \"./img/error.svg\"\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n    searchBtn: document.querySelector('[type=\"submit\"]'),\n    searchInput: document.querySelector('[name=\"search-text\"]'),\n    form: document.querySelector('.form'),\n    galleryList: document.querySelector('.gallery'),\n    moreBtn: document.querySelector('.more-btn'),\n}\n\n\n    hideLoadMoreButton();\n    let currentQuery = '';\nlet currentPage = 1;\n        const per_page = 15;\n\n    \n    // currentPage = 1;\nlet galleryCardHeight = null;\n\n\nconst onFormInter = async evt => {\n    evt.preventDefault();\n    const query = evt.currentTarget.elements['search-text'].value.trim();\n\n\n            currentQuery = query;\n        currentPage = 1;\n    \n    clearGallery();   \n// \n\n// \n    if (query === '') {\n        iziToast.error({\n            message: \"Будь ласка, введіть пошуковий запит!\",\n            messageColor: \"#ffffff\",\n            backgroundColor: \"#EF4040\",\n            timeout: 5000,\n            titleColor: \"#fff\",\n            iconUrl: errorSvg,\n            position: \"topRight\",\n        });\n        return;\n}\n    showLoader();\n\ntry {\n\n    const response = await getImagesByQuery(query, currentPage);\n    const imageArr = response.hits;\n    const totalHits = response.totalHits;\n\n\n\n        if (imageArr.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                messageColor: \"#ffffff\",\n                backgroundColor: \"#EF4040\",\n                timeout: 5000,\n                titleColor: \"#fff\",\n                iconUrl: errorSvg,\n                position: \"topRight\",\n            });\n            return;\n        };\n\n        hideLoader();\n    createGallery(imageArr);\n\n\n    currentPage += 1;\n    const totalPages = Math.ceil(totalHits / per_page);\n\n        if (currentPage <= totalPages) {\n        showLoadMoreButton();\n    \n    }\n\n\n} catch (error) {\n        hideLoader();\n        console.log(error);\n} finally {\n        hideLoader();\n        refs.form.reset();\n    };\n\n}\n\n\n\nconst onMoreBtnHandle = async evt => {\n    hideLoadMoreButton();\n    showLoader();\n    \n    \n    try {\n        \n\n    const response = await getImagesByQuery(currentQuery, currentPage);\n        const newImage = response.hits;\n        const totalHits = response.totalHits;\n\n\n\n\n        if (newImage.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                messageColor: \"#ffffff\",\n                backgroundColor: \"#EF4040\",\n                timeout: 5000,\n                titleColor: \"#fff\",\n                iconUrl: errorSvg,\n                position: \"topRight\",\n            });\n            return;\n        };\n\n\n        \n        createGallery(newImage);\n        currentPage += 1;\n\n        \n galleryCardHeight =  refs.galleryList.querySelector('li').getBoundingClientRect().height;\n\n        scrollBy({\n            top: galleryCardHeight * 2,\n            behavior: \"smooth\",\n})\n\n        const totalPages = Math.ceil(totalHits / per_page);\n\n        if (currentPage > totalPages) {\n            hideLoadMoreButton();\n             iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\",\n                messageColor: \"#ffffff\",\n                backgroundColor: \"#FFA000\",\n                timeout: 5000,\n                titleColor: \"#fff\",\n                position: \"topRight\",\n            });\n        } else {\n            showLoadMoreButton();\n        }\n\n    } catch (error) {\n        console.log(error);\n    } finally {\n        hideLoader();\n    }\n\n\n}\n\n\nrefs.form.addEventListener('submit', onFormInter);\nrefs.moreBtn.addEventListener('click', onMoreBtnHandle)"],"names":["myApiKey","getImagesByQuery","query","page","params","axios","refs","createGallery","images","imageTemplate","createImagesTemplate","lightbox","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","errorSvg","currentQuery","currentPage","per_page","galleryCardHeight","onFormInter","evt","iziToast","response","imageArr","totalHits","totalPages","error","onMoreBtnHandle","newImage"],"mappings":"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"}